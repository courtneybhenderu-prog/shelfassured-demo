<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ShelfAssured - Database Preview</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap');
        body { font-family: 'Inter', sans-serif; }
        .preview-card { border: 2px dashed #3b82f6; background: #f8fafc; }
        .validation-error { border-color: #ef4444; background: #fef2f2; }
        .validation-success { border-color: #10b981; background: #f0fdf4; }
    </style>
</head>
<body class="bg-gray-50">
    <div class="min-h-screen p-6">
        <div class="max-w-4xl mx-auto">
            <!-- Header -->
            <div class="bg-white rounded-lg shadow-sm p-6 mb-6">
                <h1 class="text-3xl font-bold text-gray-900 mb-2">ShelfAssured Database Preview</h1>
                <p class="text-gray-600">See how your app will work with proper database, validation, and API layers</p>
                <div class="mt-4 p-4 bg-blue-50 rounded-lg">
                    <p class="text-sm text-blue-800">
                        <strong>Preview Mode:</strong> This simulates Supabase integration without requiring an account. 
                        All data is stored in browser memory and includes full validation.
                    </p>
                </div>
            </div>

            <!-- Authentication Demo -->
            <div class="bg-white rounded-lg shadow-sm p-6 mb-6">
                <h2 class="text-xl font-semibold mb-4">üîê Authentication System</h2>
                <div id="auth-demo" class="space-y-4">
                    <!-- Login Form -->
                    <div id="login-form" class="preview-card p-4 rounded-lg">
                        <h3 class="font-medium mb-3">Login to Your Account</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Email</label>
                                <input type="email" id="login-email" class="w-full border rounded px-3 py-2" 
                                       placeholder="contractor@example.com" value="contractor@example.com">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Password</label>
                                <input type="password" id="login-password" class="w-full border rounded px-3 py-2" 
                                       placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" value="password123">
                            </div>
                        </div>
                        <button onclick="demoLogin()" class="mt-4 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">
                            Login
                        </button>
                    </div>

                    <!-- User Profile -->
                    <div id="user-profile" class="hidden">
                        <div class="bg-green-50 border border-green-200 rounded-lg p-4">
                            <h3 class="font-medium text-green-800 mb-2">‚úÖ Logged In</h3>
                            <p class="text-sm text-green-700">Welcome back, <span id="user-name">John Contractor</span>!</p>
                            <p class="text-xs text-green-600 mt-1">Role: <span id="user-role">Contractor</span></p>
                            <button onclick="demoLogout()" class="mt-2 text-sm text-red-600 hover:text-red-800">Logout</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Data Management Demo -->
            <div class="bg-white rounded-lg shadow-sm p-6 mb-6">
                <h2 class="text-xl font-semibold mb-4">üìä Data Management</h2>
                
                <!-- Tabs -->
                <div class="flex space-x-1 mb-6 bg-gray-100 p-1 rounded-lg">
                    <button onclick="showTab('brands')" class="tab-btn px-4 py-2 rounded text-sm font-medium" data-tab="brands">Brands</button>
                    <button onclick="showTab('stores')" class="tab-btn px-4 py-2 rounded text-sm font-medium" data-tab="stores">Stores</button>
                    <button onclick="showTab('jobs')" class="tab-btn px-4 py-2 rounded text-sm font-medium" data-tab="jobs">Jobs</button>
                    <button onclick="showTab('validation')" class="tab-btn px-4 py-2 rounded text-sm font-medium" data-tab="validation">Validation</button>
                </div>

                <!-- Brands Tab -->
                <div id="brands-tab" class="tab-content">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="font-medium">Brand Management</h3>
                        <button onclick="showAddBrandForm()" class="bg-blue-600 text-white px-3 py-1 rounded text-sm">Add Brand</button>
                    </div>
                    <div id="brands-list" class="space-y-2">
                        <!-- Brands will be loaded here -->
                    </div>
                </div>

                <!-- Stores Tab -->
                <div id="stores-tab" class="tab-content hidden">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="font-medium">Store Management</h3>
                        <button onclick="showAddStoreForm()" class="bg-blue-600 text-white px-3 py-1 rounded text-sm">Add Store</button>
                    </div>
                    <div id="stores-list" class="space-y-2">
                        <!-- Stores will be loaded here -->
                    </div>
                </div>

                <!-- Jobs Tab -->
                <div id="jobs-tab" class="tab-content hidden">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="font-medium">Job Management</h3>
                        <button onclick="showAddJobForm()" class="bg-blue-600 text-white px-3 py-1 rounded text-sm">Create Job</button>
                    </div>
                    <div id="jobs-list" class="space-y-2">
                        <!-- Jobs will be loaded here -->
                    </div>
                </div>

                <!-- Validation Tab -->
                <div id="validation-tab" class="tab-content hidden">
                    <h3 class="font-medium mb-4">Validation System Demo</h3>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Test Email Validation</label>
                            <input type="text" id="test-email" class="w-full border rounded px-3 py-2" 
                                   placeholder="Enter email to test" oninput="validateField('email', this.value)">
                            <div id="email-error" class="text-red-500 text-sm mt-1 hidden"></div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Test UPC Validation</label>
                            <input type="text" id="test-upc" class="w-full border rounded px-3 py-2" 
                                   placeholder="Enter UPC to test" oninput="validateField('upc', this.value)">
                            <div id="upc-error" class="text-red-500 text-sm mt-1 hidden"></div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Test Phone Validation</label>
                            <input type="text" id="test-phone" class="w-full border rounded px-3 py-2" 
                                   placeholder="Enter phone to test" oninput="validateField('phone', this.value)">
                            <div id="phone-error" class="text-red-500 text-sm mt-1 hidden"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Database Schema Preview -->
            <div class="bg-white rounded-lg shadow-sm p-6 mb-6">
                <h2 class="text-xl font-semibold mb-4">üóÑÔ∏è Database Schema Preview</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                    <div class="border rounded-lg p-4">
                        <h3 class="font-medium text-blue-600 mb-2">Users</h3>
                        <ul class="text-sm text-gray-600 space-y-1">
                            <li>‚Ä¢ Authentication</li>
                            <li>‚Ä¢ Roles (admin, contractor, client)</li>
                            <li>‚Ä¢ Profile management</li>
                        </ul>
                    </div>
                    <div class="border rounded-lg p-4">
                        <h3 class="font-medium text-green-600 mb-2">Brands</h3>
                        <ul class="text-sm text-gray-600 space-y-1">
                            <li>‚Ä¢ Brand information</li>
                            <li>‚Ä¢ Contact details</li>
                            <li>‚Ä¢ Logo management</li>
                        </ul>
                    </div>
                    <div class="border rounded-lg p-4">
                        <h3 class="font-medium text-purple-600 mb-2">Stores</h3>
                        <ul class="text-sm text-gray-600 space-y-1">
                            <li>‚Ä¢ Store locations</li>
                            <li>‚Ä¢ Address & coordinates</li>
                            <li>‚Ä¢ Store chain info</li>
                        </ul>
                    </div>
                    <div class="border rounded-lg p-4">
                        <h3 class="font-medium text-orange-600 mb-2">SKUs</h3>
                        <ul class="text-sm text-gray-600 space-y-1">
                            <li>‚Ä¢ Product information</li>
                            <li>‚Ä¢ UPC codes</li>
                            <li>‚Ä¢ Brand relationships</li>
                        </ul>
                    </div>
                    <div class="border rounded-lg p-4">
                        <h3 class="font-medium text-red-600 mb-2">Jobs</h3>
                        <ul class="text-sm text-gray-600 space-y-1">
                            <li>‚Ä¢ Job assignments</li>
                            <li>‚Ä¢ Store & SKU relationships</li>
                            <li>‚Ä¢ Payout calculations</li>
                        </ul>
                    </div>
                    <div class="border rounded-lg p-4">
                        <h3 class="font-medium text-indigo-600 mb-2">Submissions</h3>
                        <ul class="text-sm text-gray-600 space-y-1">
                            <li>‚Ä¢ Photo uploads</li>
                            <li>‚Ä¢ Data collection</li>
                            <li>‚Ä¢ Validation status</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Features Preview -->
            <div class="bg-white rounded-lg shadow-sm p-6">
                <h2 class="text-xl font-semibold mb-4">‚ú® New Features Preview</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <h3 class="font-medium text-gray-900 mb-3">Database Features</h3>
                        <ul class="space-y-2 text-sm text-gray-600">
                            <li class="flex items-center"><span class="text-green-500 mr-2">‚úì</span> Real data persistence</li>
                            <li class="flex items-center"><span class="text-green-500 mr-2">‚úì</span> Multi-device sync</li>
                            <li class="flex items-center"><span class="text-green-500 mr-2">‚úì</span> Data relationships</li>
                            <li class="flex items-center"><span class="text-green-500 mr-2">‚úì</span> Backup & recovery</li>
                            <li class="flex items-center"><span class="text-green-500 mr-2">‚úì</span> User authentication</li>
                        </ul>
                    </div>
                    <div>
                        <h3 class="font-medium text-gray-900 mb-3">Validation Features</h3>
                        <ul class="space-y-2 text-sm text-gray-600">
                            <li class="flex items-center"><span class="text-green-500 mr-2">‚úì</span> Real-time validation</li>
                            <li class="flex items-center"><span class="text-green-500 mr-2">‚úì</span> Business rule enforcement</li>
                            <li class="flex items-center"><span class="text-green-500 mr-2">‚úì</span> Error handling</li>
                            <li class="flex items-center"><span class="text-green-500 mr-2">‚úì</span> Data integrity</li>
                            <li class="flex items-center"><span class="text-green-500 mr-2">‚úì</span> User-friendly messages</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Include validation and API layers -->
    <script src="validation-rules.js"></script>
    <script>
        // Demo data and functionality
        let currentUser = null;
        let demoData = {
            brands: [
                { id: 1, name: 'Peet\'s Coffee', contactEmail: 'contact@peets.com', contactPhone: '+1-800-999-2132' },
                { id: 2, name: 'RIND Snacks', contactEmail: 'hello@rindsnacks.com', contactPhone: '+1-555-0123' }
            ],
            stores: [
                { id: 1, name: 'Whole Foods Market', address: '10133 Louetta Rd', city: 'Houston', state: 'TX', zipCode: '77070' },
                { id: 2, name: 'H-E-B', address: '20017 Bridgeland Creek Pkwy', city: 'Cypress', state: 'TX', zipCode: '77433' }
            ],
            jobs: [
                { 
                    id: 1, 
                    title: 'Rambler Sparkling Water Audit', 
                    brand: 'Peet\'s Coffee',
                    stores: ['Whole Foods Market'],
                    skus: ['Rambler Sparkling Water'],
                    payoutPerStore: 5.00,
                    totalPayout: 5.00,
                    status: 'pending'
                }
            ]
        };

        // Authentication demo
        function demoLogin() {
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;
            
            if (email && password) {
                currentUser = {
                    id: 1,
                    email: email,
                    fullName: 'John Contractor',
                    role: 'contractor'
                };
                
                document.getElementById('login-form').classList.add('hidden');
                document.getElementById('user-profile').classList.remove('hidden');
                document.getElementById('user-name').textContent = currentUser.fullName;
                document.getElementById('user-role').textContent = currentUser.role;
                
                loadDemoData();
            }
        }

        function demoLogout() {
            currentUser = null;
            document.getElementById('login-form').classList.remove('hidden');
            document.getElementById('user-profile').classList.add('hidden');
        }

        // Tab management
        function showTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.add('hidden');
            });
            
            // Remove active class from all buttons
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('bg-blue-600', 'text-white');
                btn.classList.add('text-gray-600');
            });
            
            // Show selected tab
            document.getElementById(tabName + '-tab').classList.remove('hidden');
            
            // Activate button
            const activeBtn = document.querySelector(`[data-tab="${tabName}"]`);
            activeBtn.classList.add('bg-blue-600', 'text-white');
            activeBtn.classList.remove('text-gray-600');
        }

        // Load demo data
        function loadDemoData() {
            loadBrands();
            loadStores();
            loadJobs();
        }

        function loadBrands() {
            const container = document.getElementById('brands-list');
            container.innerHTML = demoData.brands.map(brand => `
                <div class="border rounded-lg p-3 flex justify-between items-center">
                    <div>
                        <h4 class="font-medium">${brand.name}</h4>
                        <p class="text-sm text-gray-600">${brand.contactEmail}</p>
                    </div>
                    <div class="text-sm text-gray-500">
                        ID: ${brand.id}
                    </div>
                </div>
            `).join('');
        }

        function loadStores() {
            const container = document.getElementById('stores-list');
            container.innerHTML = demoData.stores.map(store => `
                <div class="border rounded-lg p-3 flex justify-between items-center">
                    <div>
                        <h4 class="font-medium">${store.name}</h4>
                        <p class="text-sm text-gray-600">${store.address}, ${store.city}, ${store.state} ${store.zipCode}</p>
                    </div>
                    <div class="text-sm text-gray-500">
                        ID: ${store.id}
                    </div>
                </div>
            `).join('');
        }

        function loadJobs() {
            const container = document.getElementById('jobs-list');
            container.innerHTML = demoData.jobs.map(job => `
                <div class="border rounded-lg p-3">
                    <div class="flex justify-between items-start mb-2">
                        <h4 class="font-medium">${job.title}</h4>
                        <span class="px-2 py-1 bg-yellow-100 text-yellow-800 rounded text-xs">${job.status}</span>
                    </div>
                    <p class="text-sm text-gray-600 mb-2">Brand: ${job.brand}</p>
                    <p class="text-sm text-gray-600 mb-2">Stores: ${job.stores.join(', ')}</p>
                    <p class="text-sm text-gray-600 mb-2">SKUs: ${job.skus.join(', ')}</p>
                    <div class="flex justify-between items-center">
                        <span class="text-sm font-medium text-green-600">$${job.totalPayout.toFixed(2)} total</span>
                        <span class="text-xs text-gray-500">$${job.payoutPerStore}/store</span>
                    </div>
                </div>
            `).join('');
        }

        // Validation demo
        function validateField(type, value) {
            const errorElement = document.getElementById(type + '-error');
            const inputElement = document.getElementById('test-' + type);
            
            let rule;
            switch(type) {
                case 'email':
                    rule = ValidationRules.user.email;
                    break;
                case 'upc':
                    rule = ValidationRules.sku.upc;
                    break;
                case 'phone':
                    rule = ValidationRules.user.phone;
                    break;
            }
            
            const validation = Validator.validateField(value, rule, type);
            
            if (validation.length > 0) {
                errorElement.textContent = validation[0];
                errorElement.classList.remove('hidden');
                inputElement.classList.add('validation-error');
                inputElement.classList.remove('validation-success');
            } else {
                errorElement.classList.add('hidden');
                inputElement.classList.remove('validation-error');
                inputElement.classList.add('validation-success');
            }
        }

        // Form functions (simplified for demo)
        function showAddBrandForm() {
            alert('Add Brand Form would open here with full validation');
        }

        function showAddStoreForm() {
            alert('Add Store Form would open here with full validation');
        }

        function showAddJobForm() {
            alert('Create Job Form would open here with full validation and business rules');
        }

        // Initialize demo
        document.addEventListener('DOMContentLoaded', function() {
            showTab('brands');
        });
    </script>
</body>
</html>

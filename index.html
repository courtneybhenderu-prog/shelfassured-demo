<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>ShelfAssured App Flow</title>
<!-- Chosen Palette: Warm Neutrals & Subtle Accents -->
<!-- Application Structure Plan: A single-page HTML file that lays out the app's user flow in a horizontal, scrollable format. Each screen represents a key step in the user journey for gig workers, brand clients, and administrators. JavaScript is used to manage navigation and dynamically update content, such as brand bios and job statuses, to create a holistic, interactive storyboard. This design allows for a comprehensive, end-to-end view of the app's functionality in a single, shareable file. -->
<!-- Visualization & Content Choices: The prototype relies on a combination of HTML, CSS, and Tailwind for responsive, professional styling. Instead of external images, it uses Unicode characters, placeholder boxes, and text to represent visual elements like logos, charts, and product photos. This approach ensures the prototype is entirely self-contained and adheres to the "NO SVG, NO Mermaid" rule, while effectively communicating the app's design and functionality. -->
<!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
<script src="https://cdn.tailwindcss.com"></script>
<style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7f3f0;
            color: #2d231e;
        }
        .app-flow-container {
            display: flex;
            gap: 2rem;
            padding: 2rem;
            overflow-x: auto;
            scroll-behavior: smooth;
        }
        .app-container {
            flex-shrink: 0;
            width: 100%;
            max-width: 400px;
            min-height: 800px;
            background-color: #fcfbf9;
            position: relative;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            border-radius: 1.5rem;
            overflow: hidden;
            border: 4px solid #3d342f;
        }
        .screen {
            display: block;
            width: 100%;
            height: 100%;
            padding: 1.5rem;
            overflow-y: auto;
        }
        .job-box {
            background-color: #ffffff;
            border-left: 4px solid #f9a825;
        }
        .job-box.red-border {
            border-left: 4px solid #c62828;
        }
        .loading {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #c62828;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .taskbar {
            position: sticky;
            bottom: 0;
            left: 0;
            right: 0;
            z-index: 10;
            background-color: #ffffff;
            padding: 1rem;
            border-top-left-radius: 1.5rem;
            border-top-right-radius: 1.5rem;
            box-shadow: 0 -4px 12px rgba(0,0,0,0.1);
        }
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 20;
            visibility: hidden;
            opacity: 0;
            transition: visibility 0s, opacity 0.3s;
        }
        .modal.is-visible {
            visibility: visible;
            opacity: 1;
        }
    </style>
</head>
<body class="bg-gray-200 p-4">
<div class="app-flow-container">
<!-- Screen 1: Splash/Login -->
<div class="app-container">
<div class="screen flex flex-col items-center justify-center text-center p-8" id="screen1">
<div class="mb-4 flex items-center justify-center">
<svg fill="none" height="100" viewbox="0 0 100 100" width="100" xmlns="http://www.w3.org/2000/svg">
<path d="M20 40V20C20 14.4772 24.4772 10 30 10H70C75.5228 10 80 14.4772 80 20V40" stroke="#a9a9a9" stroke-linecap="round" stroke-linejoin="round" stroke-width="5"></path>
<rect height="50" rx="10" stroke="#a9a9a9" stroke-width="5" width="80" x="10" y="40"></rect>
<line stroke="#a9a9a9" stroke-linecap="round" stroke-width="3" x1="30" x2="30" y1="50" y2="80"></line>
<line stroke="#a9a9a9" stroke-linecap="round" stroke-width="3" x1="50" x2="50" y1="50" y2="80"></line>
<line stroke="#a9a9a9" stroke-linecap="round" stroke-width="3" x1="70" x2="70" y1="50" y2="80"></line>
<path d="M85 30L90 35L85 40" stroke="#a9a9a9" stroke-linecap="round" stroke-linejoin="round" stroke-width="5"></path>
</svg>
</div>
<h1 class="text-4xl font-extrabold text-[#424242]">Shelf<span class="text-[#f9a825]">Assured</span></h1>
<p class="mt-4 text-xl font-medium text-gray-700 leading-snug">
                    Helping emerging brands see their products on grocery store shelves in real time.
                </p>
<div class="mt-12 w-full space-y-4">
<button class="w-full px-6 py-4 bg-[#c62828] text-white font-bold text-lg rounded-full shadow-lg hover:bg-red-800 transition" onclick="scrollToScreen('screen2')">
                        Create Account
                    </button>
<button class="w-full px-6 py-4 bg-gray-200 text-gray-700 font-bold text-lg rounded-full shadow-lg hover:bg-gray-300 transition" onclick="scrollToScreen('screen3')">
                        Sign In
                    </button>
<button class="w-full px-6 py-4 bg-gray-200 text-gray-700 font-bold text-lg rounded-full shadow-lg hover:bg-gray-300 transition" onclick="scrollToScreen('screen8')">
                        Client Login
                    </button>
        <!-- Admin Login (opens Administrator Dashboard) -->
<button
  onclick="openAdminDashboard()"
  class="w-full px-6 py-3 bg-gray-200 text-gray-800 font-semibold rounded-full shadow hover:bg-gray-300 transition mt-3"
  aria-label="Admin Login"
>
  Admin Login
</button>
<p class="text-sm text-gray-500 mt-4">By continuing you agree to our <a class="text-[#c62828] hover:underline" href="#">Terms of Service</a>.</p>
</div>
</div>
</div>
<!-- Screen 2: Sign-up options -->
<div class="app-container">
<div class="screen flex flex-col justify-center p-8" id="screen2">
<h2 class="text-3xl font-extrabold text-gray-800 mb-2 text-center">READY-RESET-GROW</h2>
<h2 class="text-2xl font-bold text-gray-800 mb-6">Create Account</h2>
<p class="text-gray-500 text-center mb-6">Choose a method to get started.</p>
<div class="w-full space-y-4">
<button class="w-full flex items-center justify-center space-x-3 px-6 py-4 bg-white border border-gray-300 text-gray-700 font-medium rounded-full shadow-md">
<svg class="w-6 h-6" fill="none" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
<path d="M22.56 12.2587C22.56 11.5369 22.5029 10.8282 22.3965 10.1394H12.029V14.1568H18.0195C17.7554 15.5414 16.9246 16.7118 15.7892 17.5143V20.1711H19.2311C21.2335 18.2831 22.56 15.4211 22.56 12.2587Z" fill="#4285F4"></path>
<path d="M12.0291 22.8466C15.2285 22.8466 17.9048 21.7824 19.8227 19.8227L17.2023 17.1593C15.9325 18.0664 14.1952 18.6189 12.0291 18.6189C9.07684 18.6189 6.55938 16.6575 5.64161 13.9142H2.10004V16.571H5.64161C6.73693 19.3496 9.17646 21.3283 12.0291 22.8466Z" fill="#34A853"></path>
<path d="M5.6415 13.9142C5.37739 13.1924 5.22838 12.4414 5.22838 11.6667C5.22838 10.892 5.37739 10.141 5.6415 9.41923V6.76241H2.10004C1.19697 8.5284 0.666626 10.5186 0.666626 11.6667C0.666626 12.8149 1.19697 14.8051 2.10004 16.571L5.6415 13.9142Z" fill="#FBBC04"></path>
<path d="M12.0291 4.71444C13.5658 4.71444 15.1118 5.28913 16.2736 6.36671L19.9881 2.65229C17.7554 0.764263 15.2285 0.0531542 12.0291 0.0531542C9.17646 0.0531542 6.73693 2.03186 5.64161 4.8105H9.18307C10.0963 2.10425 12.0291 4.71444 12.0291 4.71444Z" fill="#EA4335"></path>
</svg>
<span>Sign in with Google</span>
</button>
<div class="flex items-center space-x-2 w-full">
<hr class="flex-grow border-t border-gray-300"/>
<span class="text-sm text-gray-500">OR</span>
<hr class="flex-grow border-t border-gray-300"/>
</div>
<button class="w-full px-6 py-4 bg-white border border-gray-300 text-gray-700 font-medium rounded-full shadow-md" onclick="scrollToScreen('screen11')">
                        Continue with Email
                    </button>
</div>
</div>
</div>
<!-- Screen 3: Login (if already a user) -->
<div class="app-container">
<div class="screen p-8 flex flex-col justify-between" id="screen3">
<div>
<h2 class="text-2xl font-bold text-gray-800 mb-2">Welcome Back!</h2>
<p class="text-gray-500 mb-6">Sign in to your account.</p>
<form class="space-y-4">
<div>
<label class="block text-sm font-medium text-gray-700" for="email">Email</label>
<input class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:ring-red-500 focus:border-red-500" id="email" type="email"/>
</div>
<div>
<label class="block text-sm font-medium text-gray-700" for="password">Password</label>
<input class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:ring-red-500 focus:border-red-500" id="password" type="password"/>
</div>
<div class="flex items-center justify-between text-sm">
<div class="flex items-center">
<input class="h-4 w-4 text-[#c62828] focus:ring-[#c62828] border-gray-300 rounded" id="remember-me" name="remember-me" type="checkbox"/>
<label class="ml-2 block text-gray-500" for="remember-me">Remember me</label>
</div>
<a class="font-medium text-[#c62828] hover:text-red-700" href="#">Forgot password?</a>
</div>
<button class="w-full px-6 py-4 bg-[#c62828] text-white font-bold text-lg rounded-full shadow-lg hover:bg-red-800 transition" onclick="showPopUp('permissions'); scrollToScreen('screen4')">
                            Sign In
                        </button>
</form>
</div>
<div class="text-center">
<p class="text-sm text-gray-500">Don't have an account? <a class="text-[#c62828] font-medium hover:underline" href="#" onclick="scrollToScreen('screen2')">Sign up</a></p>
</div>
</div>
</div>
<!-- Screen 4: Dashboard (Shopper) -->
<div class="app-container">
<div class="screen p-8 flex flex-col justify-between" id="screen4">
<div>
<h2 class="text-3xl font-extrabold text-gray-800">Hello, Courtney!</h2>
<p class="text-lg text-gray-500">Your ShelfAssured Dashboard</p>
<div class="grid grid-cols-2 gap-4 mt-6">
<div class="bg-white p-4 rounded-xl shadow-md border-l-4 border-gray-400">
<p class="text-sm text-gray-500 font-medium">Total Income</p>
<p class="text-2xl font-bold text-gray-800 mt-1" id="total-income">$15.00</p>
</div>
<div class="bg-white p-4 rounded-xl shadow-md border-l-4 border-[#c62828]">
<p class="text-sm text-gray-500 font-medium">Current Jobs</p>
<p class="text-2xl font-bold text-gray-800 mt-1">4</p>
</div>
</div>
<div class="mt-6 space-y-4">
<div class="flex items-center justify-between">
<h3 class="text-xl font-bold text-gray-800">Jobs Near You</h3>
<button class="text-sm text-[#c62828] hover:underline">
<svg class="w-4 h-4 inline-block align-text-bottom" fill="currentColor" viewbox="0 0 20 20">
<path d="M10 3a1 1 0 011 1v4a1 1 0 11-2 0V4a1 1 0 011-1zM5 10a1 1 0 01-1-1V5a1 1 0 112 0v4a1 1 0 01-1 1zM15 10a1 1 0 01-1-1V5a1 1 0 112 0v4a1 1 0 01-1 1zM10 15a1 1 0 01-1-1v-4a1 1 0 112 0v4a1 1 0 01-1 1zM5 20a1 1 0 01-1-1v-4a1 1 0 112 0v4a1 1 0 01-1 1zM15 20a1 1 0 01-1-1v-4a1 1 0 112 0v4a1 1 0 01-1 1z"></path>
</svg> Filter
                            
<div id="jobs-dynamic" class="mt-3 space-y-3"></div>
</button>
</div>
<div class="bg-gray-200 p-3 rounded-lg text-gray-700 font-medium text-sm">
                            Whole Foods Market - 10133 Louetta Rd, Houston, TX 77070
                        </div>
<div class="job-box p-4 rounded-xl shadow-md cursor-pointer transition hover:shadow-lg" onclick="showLocationModal('Whole Foods Market - 10133 Louetta Rd, Houston, TX 77070', 'job-details-cooper');">
<p class="font-bold text-gray-800">Rambler Sparkling Water</p>
<p class="text-gray-500 text-sm mt-1">Take and upload 2 photos</p>
<p class="text-[#f9a825] font-semibold text-sm mt-2">Earn $3.00</p>
</div>
<div class="job-box p-4 rounded-xl shadow-md cursor-pointer transition hover:shadow-lg" onclick="showLocationModal('Whole Foods Market - 10133 Louetta Rd, Houston, TX 77070', 'job-details-kace');">
<p class="font-bold text-gray-800">Neutral Milk</p>
<p class="text-gray-500 text-sm mt-1">Take and upload 3 photos</p>
<p class="text-[#f9a825] font-semibold text-sm mt-2">Earn $3.00</p>
</div>
<div class="bg-gray-200 p-3 rounded-lg text-gray-700 font-medium text-sm">
                            H-E-B - 20017 Bridgeland Creek Pkwy, Cypress, TX 77433
                        </div>
<div class="job-box red-border p-4 rounded-xl shadow-md cursor-pointer transition hover:shadow-lg" onclick="showLocationModal('H-E-B - 20017 Bridgeland Creek Pkwy, Cypress, TX 77433', 'job-details-elevation');">
<p class="font-bold text-gray-800">RIND Snacks</p>
<p class="text-gray-500 text-sm mt-1">Take and upload 3 photos</p>
<p class="text-[#f9a825] font-semibold text-sm mt-2">Earn $3.00</p>
</div>
</div>
</div>
<div class="taskbar mt-auto">
<div class="flex justify-around items-center text-gray-500">
<button class="flex flex-col items-center text-[#c62828] font-bold">
<svg class="w-6 h-6" fill="currentColor" viewbox="0 0 20 20">
<path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2.586l1-1a1 1 0 011.414 0l1 1V17a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293-.293a1 1 0 000-1.414l-7-7z"></path>
</svg>
<span class="text-xs mt-1">Dashboard</span>
</button>
<button class="flex flex-col items-center hover:text-[#c62828] transition" onclick="scrollToScreen('screen9')">
<svg class="w-6 h-6" fill="currentColor" viewbox="0 0 20 20">
<path clip-rule="evenodd" d="M10 2a8 8 0 100 16 8 8 0 000-16zM5 9a1 1 0 011-1h8a1 1 0 110 2H6a1 1 0 01-1-1zm0 4a1 1 0 011-1h8a1 1 0 110 2H6a1 1 0 01-1-1z" fill-rule="evenodd"></path>
</svg>
<span class="text-xs mt-1">Jobs</span>
</button>
<button class="flex flex-col items-center hover:text-[#c62828] transition" onclick="scrollToScreen('screen10')">
<svg class="w-6 h-6" fill="currentColor" viewbox="0 0 20 20">
<path clip-rule="evenodd" d="M10 2a8 8 0 100 16 8 8 0 000-16zM8 7a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1zm0 4a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1zm0 4a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" fill-rule="evenodd"></path>
</svg>
<span class="text-xs mt-1">Brands</span>
</button>
<button class="flex flex-col items-center hover:text-[#c62828] transition" onclick="scrollToScreen('screen11')">
<svg class="w-6 h-6" fill="currentColor" viewbox="0 0 20 20">
<path clip-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" fill-rule="evenodd"></path>
</svg>
<span class="text-xs mt-1">Profile</span>
</button>
</div>
</div>
</div>
</div>
<!-- Screen 5: Job Details (as per UX plan) -->
<div class="app-container">
<div class="screen p-8 flex flex-col justify-between" id="screen5">
<div>
<button class="text-gray-500 hover:text-gray-700 transition" onclick="scrollToScreen('screen4')">
<svg class="w-8 h-8" fill="none" stroke="currentColor" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
<path d="M15 19l-7-7 7-7" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path>
</svg>
</button>
<h2 id="job-title" class="text-3xl font-bold text-gray-800 mt-4">Rambler Sparkling Water</h2>
<p id="job-store" class="text-gray-500 mt-2">Whole Foods Market</p>
<p id="job-payout" class="font-bold text-[#f9a825] text-2xl mt-4">$3.00</p>
<div class="mt-6">
<h3 class="font-bold text-xl text-gray-800">Job Instructions</h3>
<p class="text-gray-500 text-sm mt-2">Follow these steps carefully to complete the job and get paid.</p>
<div id="job-extra-instructions" class="mt-3 bg-yellow-50 border border-yellow-200 text-gray-800 text-sm rounded p-3 hidden">
  <p class="font-semibold">Special instructions:</p>
  <pre id="job-extra-instructions-text" class="whitespace-pre-wrap text-sm mt-1"></pre>
</div>
<ul class="list-none space-y-3 text-gray-700 mt-4">
<li class="flex items-start">
<span class="text-xl mr-3">✔</span>
<div>
<p class="font-medium">Go to the beverage aisle.</p>
<p class="text-sm text-gray-500">Locate the sparkling water section.</p>
</div>
</li>
<li class="flex items-start">
<span class="text-xl mr-3">✔</span>
<div>
<p class="font-medium">Take a photo of the shelf section.</p>
<p class="text-sm text-gray-500">Ensure the lighting is good and the photo is clear.</p>
</div>
</li>
<li class="flex items-start">
<span class="text-xl mr-3">✔</span>
<div>
<p class="font-medium">Take a photo of the product tag.</p>
<p class="text-sm text-gray-500">The price and barcode must be readable.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="mt-6 bg-white p-4 rounded-xl shadow border">
<label class="block text-sm font-medium text-gray-700" for="price-input">Confirm Shelf Price</label>
<div class="mt-1 relative rounded-md shadow-sm">
<div class="pointer-events-none absolute inset-y-0 left-0 pl-3 flex items-center">
<span class="text-gray-500 sm:text-sm">$</span>
</div>
<input aria-describedby="price-help" class="block w-full pl-7 pr-12 sm:text-sm border-gray-300 rounded-md focus:ring-red-500 focus:border-red-500" id="price-input" inputmode="decimal" pattern="\d+(\.\d{1,2})?" placeholder="2.99" type="text"/>
<div class="absolute inset-y-0 right-0 flex items-center">
<span class="text-gray-500 pr-3">USD</span>
</div>
</div>
<p class="mt-2 text-sm text-gray-500" id="price-help">Enter the price shown on the <strong>shelf tag</strong> (e.g., 2.99).</p>
</div>
<button class="w-full px-6 py-4 bg-[#c62828] text-white font-bold text-lg rounded-full shadow-lg hover:bg-red-800 transition mt-6" onclick="scrollToScreen('screen6')">
                    Start Job
                </button>
</div>
</div>
<!-- Screen 6: Photo Capture -->
<div class="app-container">
<div class="screen p-8 flex flex-col items-center justify-between bg-black text-white text-center" id="screen6">
<div class="mt-6 w-full max-w-sm bg-white text-black p-4 rounded-lg">
<div class="flex items-center justify-between mb-2">
<label class="block text-sm font-medium">Photo Input Mode</label>
<div class="text-xs">
<button class="px-2 py-1 border rounded" id="mode-toggle" onclick="togglePhotoMode()">Use Auto Demo</button>
</div>
</div>
<div class="mb-2 text-xs">
  <label class="mr-2">Demo Set:</label>
  <select id="demo-set" class="border rounded px-2 py-1" onchange="setDemoSet(this.value)">
    <option value="coffee">Pete's Coffee (default)</option>
    <option value="sparkling">Sparkling Water Shelf</option>
  </select>
</div>
<div id="upload-block">
<label class="block text-sm font-medium mb-2">Upload or take a photo</label>
<input accept="image/*" capture="environment" class="block w-full text-sm" id="photo-input" type="file"/>
</div>
<div class="mt-3 w-full h-40 bg-gray-200 rounded-md flex items-center justify-center text-gray-500" id="photo-preview">No photo selected</div>
<button class="mt-4 w-full px-4 py-2 bg-[#c62828] text-white font-semibold rounded-md" onclick="proceedToAnalysis()">Use This Photo</button>
<p class="text-xs text-gray-600 mt-2">Tip: Auto Demo will load sample images for quick walkthroughs.</p>
</div>
<button class="absolute top-4 left-4 text-gray-400 hover:text-gray-200 transition" onclick="scrollToScreen('screen5')">
<svg class="w-8 h-8" fill="none" stroke="currentColor" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
<path d="M15 19l-7-7 7-7" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path>
</svg>
</button>
<div class="flex-1 flex flex-col items-center justify-center">
<div class="w-24 h-24 mb-6 rounded-full bg-gray-600 flex items-center justify-center">
<svg class="w-12 h-12 text-gray-400" fill="currentColor" viewbox="0 0 20 20">
<path clip-rule="evenodd" d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 5-4V15z" fill-rule="evenodd"></path>
</svg>
</div>
<h2 class="text-xl font-bold">Take Photo 1 of 2</h2>
<p class="text-gray-400 mt-2">Shelf Section</p>
</div>
<div class="w-20 h-20 rounded-full border-4 border-white cursor-pointer hover:bg-gray-700 transition" onclick="scrollToScreen('screen7')"></div>
<p class="text-sm text-gray-500 mt-4">Tap to capture</p>
</div>
</div>
<!-- Screen 7: Uploading & AI Analysis (as per UX plan) -->
<div class="app-container">
<div class="screen p-8 flex flex-col items-center justify-center text-center" id="screen7">
<div class="loading"></div>
<h2 class="text-xl font-bold text-gray-800 mt-6">Uploading &amp; Analyzing...</h2>
<p class="text-gray-500 mt-2">
                    Fantastic! Let's see if we got everything we need. This should only take a few seconds.
                </p>
<div class="mt-6 bg-white p-4 rounded-xl shadow-md border-l-4 border-[#c62828] w-full max-w-sm">
<p class="font-bold text-gray-800">Checking...</p>
<p class="text-gray-500 text-sm mt-1">✓ Proper lighting</p>
<p class="text-gray-500 text-sm">✓ In-focus</p>
<p class="text-gray-500 text-sm">✓ Visible product</p>
</div>

<div id="vision-analysis" class="mt-6 bg-white p-4 rounded-xl shadow-md border">
  <div class="flex items-center justify-between">
    <h3 class="font-bold text-lg">Vision Analysis (beta)</h3>
    <button id="vision-btn" onclick="runVisionAnalysis()" class="text-sm border px-3 py-1 rounded">Analyze This Photo</button>
  </div>
  <p class="text-xs text-gray-600 mt-1">Prototype-only: click <b>Analyze This Photo</b> to populate a structured summary.</p>
  <div id="vision-results" class="mt-3 text-sm text-gray-800"></div>
</div>
<button class="w-full px-6 py-4 bg-[#c62828] text-white font-bold text-lg rounded-full shadow-lg hover:bg-red-800 transition mt-6" onclick="submitJob()">
                    Submit for Review
                </button>
</div>
</div>
<!-- Screen 8: Client Dashboard (as per UX plan) -->
<div class="app-container">
<div class="screen p-8 flex flex-col justify-between" id="screen8">
<div>
<h2 class="text-3xl font-extrabold text-gray-800">Client Dashboard</h2>
<p class="text-lg text-gray-500">Real-time data at your fingertips</p>
<div class="grid grid-cols-2 gap-4 mt-6">
<div class="bg-white p-4 rounded-xl shadow-md border-l-4 border-[#4285F4]">
<p class="text-sm text-gray-500 font-medium">Shelf Presence Score</p>
<p class="text-2xl font-bold text-gray-800 mt-1">89%</p>
<p class="text-xs text-gray-500 mt-1">Based on Planogram, Facings, &amp; Tidiness.</p>
</div>
<div class="bg-white p-4 rounded-xl shadow-md border-l-4 border-[#c62828]">
<p class="text-sm text-gray-500 font-medium">Out-of-Stock Alerts</p>
<p class="text-2xl font-bold text-gray-800 mt-1">🚨</p>
<p class="text-xs text-gray-500 mt-1">Whole Foods, Houston</p>
</div>
</div>
<div class="mt-6 bg-white p-4 rounded-xl shadow-md">
<h3 class="font-bold text-xl text-gray-800">Recent Audits</h3>
<p class="text-gray-500 text-sm mt-2">Latest photos from your team.</p>
<div class="mt-4 grid grid-cols-3 gap-2">
<div class="w-full h-20 bg-gray-200 rounded-lg"></div>
<div class="w-full h-20 bg-gray-200 rounded-lg"></div>
<div class="w-full h-20 bg-gray-200 rounded-lg"></div>
<div class="w-full h-20 bg-gray-200 rounded-lg"></div>
<div class="w-full h-20 bg-gray-200 rounded-lg"></div>
<div class="w-full h-20 bg-gray-200 rounded-lg"></div>
</div>
</div>
</div>
<button class="w-full px-6 py-4 bg-[#f9a825] text-white font-bold text-lg rounded-full shadow-lg hover:bg-yellow-600 transition mt-6" onclick="scrollToScreen('screen13')">
                    Create New Job
                </button>
<div class="mt-6 bg-white p-4 rounded-xl shadow-md border-l-4 border-[#34A853]">
<p class="text-sm text-gray-500 font-medium">Latest Reported Shelf Price</p>
<p class="text-2xl font-bold text-gray-800 mt-1">$<span id="reported-price">—</span></p>
<p class="text-xs text-gray-500 mt-1"><span id="reported-price-location">Location pending</span></p>
</div>
<div class="mt-4 grid grid-cols-2 gap-2">
<button class="w-full px-6 py-3 bg-gray-800 text-white font-semibold rounded-full shadow hover:bg-black transition" onclick="scrollToScreen('screen19'); buildReportFromState(); injectReportAnalysis();">Open Client Snapshot</button>
</div>
<div class="mt-6 bg-white p-4 rounded-xl shadow-md">
<div class="flex items-center justify-between">
<h3 class="font-bold text-xl text-gray-800">Jobs Map</h3>
<button class="text-sm border px-2 py-1 rounded" onclick="toggleMapMode()">Toggle Live Map</button>
</div>
<div class="mt-3" id="map-static">
<img alt="Map placeholder" class="w-full h-48 object-cover rounded" src="https://upload.wikimedia.org/wikipedia/commons/5/5c/BlankMap-World-v2.png"/>
<p class="text-xs text-gray-500 mt-1">Static placeholder shown offline. Toggle for live map (internet required).</p>
</div>
<div class="mt-3 hidden" id="map-live">
<iframe class="w-full h-48 rounded" loading="lazy" src="https://www.google.com/maps?q=Houston,+TX&amp;output=embed"></iframe>
</div>
</div>
</div>
</div>
<!-- Screen 9: Shopper Jobs List (as per UX plan) -->
<div class="app-container">
<div class="screen p-8 flex flex-col justify-between" id="screen9">
<div>
<h2 class="text-3xl font-extrabold text-gray-800">My Jobs</h2>
<p class="text-lg text-gray-500">View your current and completed tasks</p>
<div class="mt-6 space-y-4">
<div class="bg-white p-4 rounded-xl shadow-md border-l-4 border-green-500">
<p class="font-bold text-gray-800">Rambler Sparkling Water</p>
<p class="text-gray-500 text-sm mt-1">Completed at Whole Foods Market</p>
<p class="text-green-500 font-bold text-sm mt-2">Earned $3.00</p>
</div>
<div class="bg-white p-4 rounded-xl shadow-md border-l-4 border-yellow-500">
<p class="font-bold text-gray-800">Neutral Milk</p>
<p class="text-gray-500 text-sm mt-1">In progress at Whole Foods Market</p>
<p class="text-yellow-500 font-bold text-sm mt-2">Estimated Earnings: $3.00</p>
</div>
<div class="bg-white p-4 rounded-xl shadow-md border-l-4 border-gray-400">
<p class="font-bold text-gray-800">RIND Snacks</p>
<p class="text-gray-500 text-sm mt-1">Pending approval</p>
<p class="text-gray-400 font-bold text-sm mt-2">Waiting for approval</p>
</div>
</div>
</div>
<div class="taskbar mt-auto">
<div class="flex justify-around items-center text-gray-500">
<button class="flex flex-col items-center hover:text-[#c62828] transition" onclick="scrollToScreen('screen4')">
<svg class="w-6 h-6" fill="currentColor" viewbox="0 0 20 20">
<path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2.586l1-1a1 1 0 011.414 0l1 1V17a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293-.293a1 1 0 000-1.414l-7-7z"></path>
</svg>
<span class="text-xs mt-1">Dashboard</span>
</button>
<button class="flex flex-col items-center text-[#c62828] font-bold">
<svg class="w-6 h-6" fill="currentColor" viewbox="0 0 20 20">
<path clip-rule="evenodd" d="M10 2a8 8 0 100 16 8 8 0 000-16zM5 9a1 1 0 011-1h8a1 1 0 110 2H6a1 1 0 01-1-1zm0 4a1 1 0 011-1h8a1 1 0 110 2H6a1 1 0 01-1-1z" fill-rule="evenodd"></path>
</svg>
<span class="text-xs mt-1">Jobs</span>
</button>
<button class="flex flex-col items-center hover:text-[#c62828] transition" onclick="scrollToScreen('screen10')">
<svg class="w-6 h-6" fill="currentColor" viewbox="0 0 20 20">
<path clip-rule="evenodd" d="M10 2a8 8 0 100 16 8 8 0 000-16zM8 7a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1zm0 4a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1zm0 4a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" fill-rule="evenodd"></path>
</svg>
<span class="text-xs mt-1">Brands</span>
</button>
<button class="flex flex-col items-center hover:text-[#c62828] transition" onclick="scrollToScreen('screen11')">
<svg class="w-6 h-6" fill="currentColor" viewbox="0 0 20 20">
<path clip-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" fill-rule="evenodd"></path>
</svg>
<span class="text-xs mt-1">Profile</span>
</button>
</div>
</div>
</div>
</div>
<!-- Screen 10: Brands List (as per UX plan) -->
<div class="app-container">
<div class="screen p-8 flex flex-col justify-between" id="screen10">
<div>
<h2 class="text-3xl font-extrabold text-gray-800">Brands</h2>
<p class="text-lg text-gray-500">Explore participating brands &amp; offers</p>
<div class="mt-6 grid grid-cols-2 gap-4">
<div class="bg-white p-4 rounded-xl shadow-md text-center cursor-pointer" onclick="scrollToScreen('screen12'); updateBrandBio('Rambler Sparkling Water', 'Rambler is a Texas-based sparkling water company known for its uniquely refreshing taste and commitment to sustainability. They draw their water from a pristine Texas spring, creating a crisp and clean beverage that’s naturally mineral-rich.')">
<div class="w-24 h-24 mx-auto overflow-hidden rounded-full flex items-center justify-center">
<span class="text-sm text-gray-400">R</span>
</div>
<p class="font-bold text-gray-800 mt-2">Rambler Sparkling Water</p>
<p class="text-[#f9a825] font-semibold text-sm mt-1">Save 10%</p>
</div>
<div class="bg-white p-4 rounded-xl shadow-md text-center cursor-pointer" onclick="scrollToScreen('screen12'); updateBrandBio('Neutral Milk', 'Neutral is on a mission to reduce the carbon footprint of dairy farming. They partner with regenerative farmers to produce delicious, carbon-neutral milk and dairy products, creating a more sustainable food system from the ground up.')">
<div class="w-24 h-24 mx-auto bg-gray-200 rounded-full flex items-center justify-center">
<span class="text-xs text-gray-400">N</span>
</div>
<p class="font-bold text-gray-800 mt-2">Neutral Milk</p>
<p class="text-[#f9a825] font-semibold text-sm mt-1">Coupon Available</p>
</div>
<div class="bg-white p-4 rounded-xl shadow-md text-center cursor-pointer" onclick="scrollToScreen('screen12'); updateBrandBio('Mana Foods', 'Mana Foods is a small, organic food company based in Hawaii. They focus on using local, sustainable ingredients to create natural and wholesome products that celebrate the rich flavors and traditions of the islands.')">
<div class="w-24 h-24 mx-auto bg-gray-200 rounded-full flex items-center justify-center">
<span class="text-xs text-gray-400">MF</span>
</div>
<p class="font-bold text-gray-800 mt-2">Mana Foods</p>
<p class="text-[#f9a825] font-semibold text-sm mt-1">Explore</p>
</div>
<div class="bg-white p-4 rounded-xl shadow-md text-center cursor-pointer" onclick="scrollToScreen('screen12'); updateBrandBio('RIND Snacks', 'RIND is an innovative upcycled fruit snack company. They create delicious, naturally fiber-rich snacks by using the whole fruit, including the skin, to maximize nutrition and minimize food waste.')">
<div class="w-24 h-24 mx-auto bg-gray-200 rounded-full flex items-center justify-center">
<span class="text-xs text-gray-400">RIND</span>
</div>
<p class="font-bold text-gray-800 mt-2">RIND Snacks</p>
<p class="text-[#f9a825] font-semibold text-sm mt-1">Save 15%</p>
</div>
<div class="bg-white p-4 rounded-xl shadow-md text-center cursor-pointer" onclick="scrollToScreen('screen12'); updateBrandBio('Peet\'s Coffee', 'Peet\'s Coffee is a specialty coffee company with a focus on high-quality, hand-roasted beans. They are a beloved brand known for their rich, deep flavors and commitment to craft coffee.')">
<div class="w-24 h-24 mx-auto bg-gray-200 rounded-full flex items-center justify-center">
<span class="text-xs text-gray-400">PC</span>
</div>
<p class="font-bold text-gray-800 mt-2">Peet's Coffee</p>
<p class="text-[#f9a825] font-semibold text-sm mt-1">Explore</p>
</div>
</div>
</div>
<div class="taskbar mt-auto">
<div class="flex justify-around items-center text-gray-500">
<button class="flex flex-col items-center hover:text-[#c62828] transition" onclick="scrollToScreen('screen4')">
<svg class="w-6 h-6" fill="currentColor" viewbox="0 0 20 20">
<path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2.586l1-1a1 1 0 011.414 0l1 1V17a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293-.293a1 1 0 000-1.414l-7-7z"></path>
</svg>
<span class="text-xs mt-1">Dashboard</span>
</button>
<button class="flex flex-col items-center text-[#c62828] font-bold">
<svg class="w-6 h-6" fill="currentColor" viewbox="0 0 20 20">
<path clip-rule="evenodd" d="M10 2a8 8 0 100 16 8 8 0 000-16zM5 9a1 1 0 011-1h8a1 1 0 110 2H6a1 1 0 01-1-1zm0 4a1 1 0 011-1h8a1 1 0 110 2H6a1 1 0 01-1-1z" fill-rule="evenodd"></path>
</svg>
<span class="text-xs mt-1">Jobs</span>
</button>
<button class="flex flex-col items-center hover:text-[#c62828] transition" onclick="scrollToScreen('screen10')">
<svg class="w-6 h-6" fill="currentColor" viewbox="0 0 20 20">
<path clip-rule="evenodd" d="M10 2a8 8 0 100 16 8 8 0 000-16zM8 7a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1zm0 4a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1zm0 4a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" fill-rule="evenodd"></path>
</svg>
<span class="text-xs mt-1">Brands</span>
</button>
<button class="flex flex-col items-center hover:text-[#c62828] transition" onclick="scrollToScreen('screen11')">
<svg class="w-6 h-6" fill="currentColor" viewbox="0 0 20 20">
<path clip-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" fill-rule="evenodd"></path>
</svg>
<span class="text-xs mt-1">Profile</span>
</button>
</div>
</div>
</div>
</div>
<!-- Screen 11: Profile Page (as per UX plan) -->
<div class="app-container">
<div class="screen p-8 flex flex-col justify-between" id="screen11">
<div>
<h2 class="text-3xl font-extrabold text-gray-800">My Profile</h2>
<p class="text-lg text-gray-500">Account settings &amp; information</p>
<div class="mt-6 space-y-4">
<div class="bg-white p-4 rounded-xl shadow-md border-l-4 border-gray-400">
<p class="font-bold text-gray-800">Total Earnings</p>
<p class="text-2xl font-bold text-gray-800 mt-1">$15.00</p>
</div>
<div class="bg-white p-4 rounded-xl shadow-md border-l-4 border-gray-400">
<p class="font-bold text-gray-800">Jobs Completed</p>
<p class="text-2xl font-bold text-gray-800 mt-1">2</p>
</div>
<div class="bg-white p-4 rounded-xl shadow-md">
<p class="font-bold text-gray-800">Account Details</p>
<p class="text-gray-500 text-sm mt-1">Courtney Bhenderu</p>
<p class="text-gray-500 text-sm">courtney.bhenderu@email.com</p>
</div>
<div class="bg-white p-4 rounded-xl shadow-md">
<p class="font-bold text-gray-800">Payment Information</p>
<p class="text-gray-500 text-sm mt-1">Connected via Zelle</p>
</div>
</div>
</div>
<div class="taskbar mt-auto">
<div class="flex justify-around items-center text-gray-500">
<button class="flex flex-col items-center hover:text-[#c62828] transition" onclick="scrollToScreen('screen4')">
<svg class="w-6 h-6" fill="currentColor" viewbox="0 0 20 20">
<path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2.586l1-1a1 1 0 011.414 0l1 1V17a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293-.293a1 1 0 000-1.414l-7-7z"></path>
</svg>
<span class="text-xs mt-1">Dashboard</span>
</button>
<button class="flex flex-col items-center text-[#c62828] font-bold">
<svg class="w-6 h-6" fill="currentColor" viewbox="0 0 20 20">
<path clip-rule="evenodd" d="M10 2a8 8 0 100 16 8 8 0 000-16zM5 9a1 1 0 011-1h8a1 1 0 110 2H6a1 1 0 01-1-1zm0 4a1 1 0 011-1h8a1 1 0 110 2H6a1 1 0 01-1-1z" fill-rule="evenodd"></path>
</svg>
<span class="text-xs mt-1">Jobs</span>
</button>
<button class="flex flex-col items-center hover:text-[#c62828] transition" onclick="scrollToScreen('screen10')">
<svg class="w-6 h-6" fill="currentColor" viewbox="0 0 20 20">
<path clip-rule="evenodd" d="M10 2a8 8 0 100 16 8 8 0 000-16zM8 7a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1zm0 4a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1zm0 4a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" fill-rule="evenodd"></path>
</svg>
<span class="text-xs mt-1">Brands</span>
</button>
<button class="flex flex-col items-center text-[#c62828] font-bold">
<svg class="w-6 h-6" fill="currentColor" viewbox="0 0 20 20">
<path clip-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" fill-rule="evenodd"></path>
</svg>
<span class="text-xs mt-1">Profile</span>
</button>
</div>
</div>
</div>
</div>
<!-- Screen 12: Brand Bio Page (as per UX plan) -->
<div class="app-container">
<div class="screen p-8 flex flex-col justify-between" id="screen12">
<div>
<button class="text-gray-500 hover:text-gray-700 transition" onclick="scrollToScreen('screen10')">
<svg class="w-8 h-8" fill="none" stroke="currentColor" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
<path d="M15 19l-7-7 7-7" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path>
</svg>
</button>
<h2 class="text-3xl font-extrabold text-gray-800 mt-4" id="brand-bio-title"></h2>
<p class="text-gray-600 mt-4" id="brand-bio-text"></p>
</div>
<button class="w-full px-6 py-4 bg-gray-200 text-gray-700 font-bold text-lg rounded-full shadow-lg hover:bg-gray-300 transition mt-6" onclick="scrollToScreen('screen10')">
                    Back to Brands
                </button>
</div>
<div class="taskbar mt-auto">
<div class="flex justify-around items-center text-gray-500">
<button class="flex flex-col items-center hover:text-[#c62828] transition" onclick="scrollToScreen('screen4')">
<svg class="w-6 h-6" fill="currentColor" viewbox="0 0 20 20">
<path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2.586l1-1a1 1 0 011.414 0l1 1V17a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293-.293a1 1 0 000-1.414l-7-7z"></path>
</svg>
<span class="text-xs mt-1">Dashboard</span>
</button>
<button class="flex flex-col items-center text-[#c62828] font-bold">
<svg class="w-6 h-6" fill="currentColor" viewbox="0 0 20 20">
<path clip-rule="evenodd" d="M10 2a8 8 0 100 16 8 8 0 000-16zM5 9a1 1 0 011-1h8a1 1 0 110 2H6a1 1 0 01-1-1zm0 4a1 1 0 011-1h8a1 1 0 110 2H6a1 1 0 01-1-1z" fill-rule="evenodd"></path>
</svg>
<span class="text-xs mt-1">Jobs</span>
</button>
<button class="flex flex-col items-center hover:text-[#c62828] transition" onclick="scrollToScreen('screen10')">
<svg class="w-6 h-6" fill="currentColor" viewbox="0 0 20 20">
<path clip-rule="evenodd" d="M10 2a8 8 0 100 16 8 8 0 000-16zM8 7a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1zm0 4a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1zm0 4a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" fill-rule="evenodd"></path>
</svg>
<span class="text-xs mt-1">Brands</span>
</button>
<button class="flex flex-col items-center hover:text-[#c62828] transition" onclick="scrollToScreen('screen11')">
<svg class="w-6 h-6" fill="currentColor" viewbox="0 0 20 20">
<path clip-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" fill-rule="evenodd"></path>
</svg>
<span class="text-xs mt-1">Profile</span>
</button>
</div>
</div>
</div>
<!-- Screen 13: Create New Job (as per UX plan) -->
<div class="app-container">
<div class="screen p-8 flex flex-col justify-between" id="screen13">
<div>
<h2 class="text-3xl font-extrabold text-gray-800">Create New Job</h2>
<p class="text-lg text-gray-500">Pick the best option for your needs.</p>
<div class="mt-6 space-y-4">
<div class="bg-white p-4 rounded-xl shadow-md border-l-4 border-green-500 cursor-pointer hover:bg-gray-50 transition">
<h3 class="font-bold text-gray-800">Standard Check</h3>
<p class="text-sm text-gray-500 mt-1">Get core photos and AI analysis within 48 hours.</p>
</div>
<div class="bg-white p-4 rounded-xl shadow-md border-l-4 border-yellow-500 cursor-pointer hover:bg-gray-50 transition">
<h3 class="font-bold text-gray-800">Launch Day Bundle</h3>
<p class="text-sm text-gray-500 mt-1">Photos and analysis from multiple launch stores within 24 hours.</p>
</div>
<div class="bg-white p-4 rounded-xl shadow-md border-l-4 border-red-500 cursor-pointer hover:bg-gray-50 transition">
<h3 class="font-bold text-gray-800">Rush Audit</h3>
<p class="text-sm text-gray-500 mt-1">Urgent photos and analysis within 6 hours.</p>
</div>
</div>
</div>
<div class="mt-6 space-y-4">
<button class="w-full px-6 py-4 bg-[#c62828] text-white font-bold text-lg rounded-full shadow-lg hover:bg-red-800 transition" onclick="scrollToScreen('screen8')">
                        Select Job Type
                    </button>
<button class="w-full px-6 py-4 bg-gray-200 text-gray-700 font-bold text-lg rounded-full shadow-lg hover:bg-gray-300 transition mt-4" onclick="scrollToScreen('screen8')">
                        Cancel
                    </button>
</div>
</div>
</div>
<!-- Screen 14: Administrator Dashboard (as per UX plan) -->
<div class="app-container">
<div class="screen p-8 flex flex-col justify-between" id="screen14">
<div>
<h2 class="text-3xl font-extrabold text-gray-800">Admin Dashboard</h2>
<p class="text-lg text-gray-500">Platform-wide oversight</p>
<div class="mt-6 space-y-4">
<div class="bg-white p-4 rounded-xl shadow-md border-l-4 border-gray-400">
<p class="font-bold text-gray-800">New User Sign-ups</p>
<div class="mt-2 flex items-center justify-between">
<p class="text-2xl font-bold text-gray-800">5</p>
<button class="text-sm text-[#c62828] hover:underline" onclick="scrollToScreen('screen15')">Review</button>
</div>
</div>
<div class="bg-white p-4 rounded-xl shadow-md border-l-4 border-[#f9a825]">
<p class="font-bold text-gray-800">Jobs to Approve</p>
<div class="mt-2 flex items-center justify-between">
<p class="text-2xl font-bold text-gray-800">3</p>
<button class="text-sm text-[#c62828] hover:underline" onclick="scrollToScreen('screen16')">Review</button>
</div>
</div>
<div class="bg-white p-4 rounded-xl shadow-md border-l-4 border-red-500">
<p class="font-bold text-gray-800">Support Requests</p>
<div class="mt-2 flex items-center justify-between">
<p class="text-2xl font-bold text-gray-800">1</p>
<button class="text-sm text-[#c62828] hover:underline" onclick="scrollToScreen('screen17')">View</button>
</div>
</div>
<div class="bg-white p-4 rounded-xl shadow-md">
<p class="font-bold text-gray-800">Platform Performance</p>
<p class="text-gray-500 text-sm mt-1">Job Completion Rate: 95%</p>
</div>
</div>
</div>
</div>
</div>
<!-- Screen 15: Admin - User Approval -->
<div class="app-container">
<div class="screen p-8 flex flex-col justify-between" id="screen15">
<div>
<h2 class="text-3xl font-extrabold text-gray-800">Review New Users</h2>
<p class="text-lg text-gray-500">Approve or deny new gig workers.</p>
<div class="mt-6 space-y-4">
<div class="bg-white p-4 rounded-xl shadow-md border-l-4 border-gray-400">
<p class="font-bold text-gray-800">New User: Jane Doe</p>
<p class="text-sm text-gray-500 mt-1">Joined: Aug 28, 2025</p>
<p class="text-sm text-gray-500">Location: Houston, TX</p>
<div class="mt-4 flex space-x-2">
<button class="px-4 py-2 bg-green-500 text-white text-sm rounded-full">Approve</button>
<button class="px-4 py-2 bg-red-500 text-white text-sm rounded-full">Deny</button>
</div>
</div>
</div>
</div>
<button class="w-full px-6 py-4 bg-gray-200 text-gray-700 font-bold text-lg rounded-full shadow-lg hover:bg-gray-300 transition mt-6" onclick="scrollToScreen('screen14')">
                    Back to Admin Dashboard
                </button>
</div>
</div>
<!-- Screen 16: Admin - Job Approval -->
<div class="app-container">
<div class="screen p-8 flex flex-col justify-between" id="screen16">
<div>
<h2 class="text-3xl font-extrabold text-gray-800">Review Job Submissions</h2>
<p class="text-lg text-gray-500">Approve or reject job photos.</p>
<div class="mt-6 space-y-4">
<div class="bg-white p-4 rounded-xl shadow-md border-l-4 border-[#f9a825]">
<p class="font-bold text-gray-800">Job: Peet's Coffee</p>
<p class="text-sm text-gray-500 mt-1">User: Jane Doe | H-E-B, Bridgeland</p>
<div class="mt-4 grid grid-cols-3 gap-2">
<div class="bg-gray-200 h-32 rounded-lg flex items-center justify-center">
<span class="text-xs text-gray-400">Aisle View</span>
</div>
<div class="bg-gray-200 h-32 rounded-lg flex items-center justify-center">
<span class="text-xs text-gray-400">Shelf View</span>
</div>
<div class="bg-gray-200 h-32 rounded-lg flex items-center justify-center">
<span class="text-xs text-gray-400">Price Tag</span>
</div>
</div>
<div class="mt-4 flex space-x-2">
<button class="px-4 py-2 bg-green-500 text-white text-sm rounded-full">Approve</button>
<button class="px-4 py-2 bg-red-500 text-white text-sm rounded-full">Reject</button>
</div>
</div>
</div>
</div>
<button class="w-full px-6 py-4 bg-gray-200 text-gray-700 font-bold text-lg rounded-full shadow-lg hover:bg-gray-300 transition mt-6" onclick="scrollToScreen('screen14')">
                    Back to Admin Dashboard
                </button>
</div>
</div>
<!-- Screen 17: Admin - Support Requests -->
<div class="app-container">
<div class="screen p-8 flex flex-col justify-between" id="screen17">
<div>
<h2 class="text-3xl font-extrabold text-gray-800">Support Requests</h2>
<p class="text-lg text-gray-500">View and respond to user help requests.</p>
<div class="mt-6 space-y-4">
<div class="bg-white p-4 rounded-xl shadow-md border-l-4 border-red-500">
<p class="font-bold text-gray-800">Support Request from John Doe</p>
<p class="text-sm text-gray-500 mt-1">Re: Peet's Coffee job at H-E-B, Bridgeland</p>
<p class="text-gray-700 mt-2">"My photos keep getting rejected. I can't figure out why."</p>
<div class="mt-4 flex space-x-2">
<button class="px-4 py-2 bg-blue-500 text-white text-sm rounded-full">Reply</button>
<button class="px-4 py-2 bg-gray-300 text-gray-800 text-sm rounded-full">Resolve</button>
</div>
</div>
</div>
</div>
<button class="w-full px-6 py-4 bg-gray-200 text-gray-700 font-bold text-lg rounded-full shadow-lg hover:bg-gray-300 transition mt-6" onclick="scrollToScreen('screen14')">
                    Back to Admin Dashboard
                </button>
</div>
</div>
</div>
<!-- Modal for Manual Location Confirmation -->
<div class="modal" id="location-modal">
<div class="bg-white p-8 rounded-2xl shadow-xl w-80 text-center">
<h3 class="text-xl font-bold text-gray-800 mb-4">Confirm Your Location</h3>
<p class="text-sm text-gray-600 mb-6">
                To confirm you're at the correct store and can begin this job, we need to check your current location.
            </p>
<p class="text-sm font-semibold text-red-500 hidden mb-6" id="location-modal-text">
                It looks like you're not at the correct store. Please try again when you arrive.
            </p>
<div class="space-x-4">
<button class="px-6 py-2 bg-[#c62828] text-white font-bold rounded-full hover:bg-red-800 transition" onclick="confirmLocation()">
                    Confirm Location
                </button>
<button class="px-6 py-2 text-gray-700 font-bold rounded-full border border-gray-300 hover:bg-gray-100 transition" onclick="hideModal('location-modal')">
                    Cancel
                </button>
</div>
</div>
</div>
<!-- Modal for Admin Push Notification Simulation -->
<div class="modal" id="admin-notification-modal">
<div class="bg-white p-6 rounded-2xl shadow-xl w-80">
<div class="flex items-center space-x-4">
<span class="bg-red-500 text-white w-10 h-10 rounded-full flex items-center justify-center text-xl">🔔</span>
<p class="font-bold text-lg text-gray-800">Support Request</p>
</div>
<p class="text-sm text-gray-600 mt-4">
                A gig worker has submitted a help request for a rejected job.
            </p>
<button class="mt-4 w-full py-2 bg-[#c62828] text-white font-bold rounded-full" onclick="hideModal('admin-notification-modal'); scrollToScreen('screen17');">
                View Request
            </button>
</div>
</div>
<script>
        function scrollToScreen(id) {
            document.getElementById(id).scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
        function updateBrandBio(title, bio) {
            document.getElementById('brand-bio-title').innerText = title;
            document.getElementById('brand-bio-text').innerText = bio;
        }
        
        let targetStore = '';
        function showLocationModal(storeName, nextScreenId) {
            targetStore = storeName;
            document.getElementById('location-modal').classList.add('is-visible');
        }

        function hideModal(id) {
            document.getElementById(id).classList.remove('is-visible');
        }

        function confirmLocation(){
    hideModal('location-modal');
    try {
        if (typeof SA !== 'undefined' && SA.storeKey) {
            var ts = (typeof targetStore !== 'undefined' && targetStore) ? targetStore : '';
            if (ts) { localStorage.setItem(SA.storeKey, ts); }
        }
    } catch(e){ /* no-op */ }
    scrollToScreen('screen5');
}
        
        // This simulates a push notification being triggered and shown to the admin.
        function simulatePushNotification() {
            setTimeout(() => {
                document.getElementById('admin-notification-modal').classList.add('is-visible');
            }, 1000);
        }
    </script>
<div class="app-container">
<div class="screen p-8" id="screen19">
<div class="max-w-2xl mx-auto bg-white rounded-xl shadow p-6 print:shadow-none">
<div class="flex items-center justify-between mb-4">
<h2 class="text-2xl font-extrabold text-gray-800">ShelfAssured — Client Snapshot</h2>
<button class="px-3 py-2 bg-[#c62828] text-white rounded-md" onclick="window.print()">Print / Save PDF</button>
</div>
<div class="grid grid-cols-2 gap-4">
<div class="bg-gray-50 p-4 rounded-md">
<p class="text-sm text-gray-500">Brand</p>
<p class="text-lg font-semibold" id="report-brand">—</p>
</div>
<div class="bg-gray-50 p-4 rounded-md">
<p class="text-sm text-gray-500">Store</p>
<p class="text-lg font-semibold" id="report-store">—</p>
</div>
<div class="bg-gray-50 p-4 rounded-md">
<p class="text-sm text-gray-500">Reported Shelf Price</p>
<p class="text-lg font-semibold" id="report-price">—</p>
</div>
<div class="bg-gray-50 p-4 rounded-md">
<p class="text-sm text-gray-500">Submitted</p>
<p class="text-lg font-semibold" id="report-date">—</p>
</div>
</div>
<div class="mt-6">
<p class="font-semibold text-gray-700 mb-2">Photos</p>
<div class="grid grid-cols-3 gap-2" id="report-photos"></div>
</div>
<div class="mt-6">
  <p class="font-semibold text-gray-700 mb-2">Analysis Summary</p>
  <div id="report-analysis" class="text-sm text-gray-800 bg-gray-50 p-3 rounded">No analysis captured yet. Use <b>Analyze This Photo</b> on the Analysis screen.</div>
</div>
</div>
</div>
</div>
<style>
@media print {
  body * { visibility: hidden; }
  #screen19, #screen19 * { visibility: visible; }
  #screen19 { position: absolute; left: 0; top: 0; width: 100%; }
}
</style>
<script>
// --- Simple demo state ---
var SA = {
  earningsKey: 'sa_earnings',
  jobsKey: 'sa_jobs_completed',
  priceKey: 'sa_last_price',
  storeKey: 'sa_last_store',
  brandKey: 'sa_last_brand',
  photoKey: 'sa_last_photo',
  submittedAtKey: 'sa_last_submitted_at'
};

function initState(){
  if (localStorage.getItem(SA.earningsKey) === null) localStorage.setItem(SA.earningsKey, '1500'); // $15.00
  if (localStorage.getItem(SA.jobsKey) === null) localStorage.setItem(SA.jobsKey, '2');
  syncClientUI();
}

function syncClientUI(){
  var price = localStorage.getItem(SA.priceKey);
  var store = localStorage.getItem(SA.storeKey);
  var rp = document.getElementById('reported-price');
  var rpl = document.getElementById('reported-price-location');
  if (rp) rp.textContent = price ? price : '—';
  if (rpl) rpl.textContent = store ? store : 'Location pending';
}

function submitJob(){
  var priceInput = document.getElementById('price-input');
  var val = priceInput ? (priceInput.value || '').trim() : '';
  if (!/^[0-9]+(\.[0-9]{1,2})?$/.test(val)){ alert('Please enter a valid shelf price, e.g., 2.99'); return; }

  localStorage.setItem(SA.priceKey, val);
  (function(){
  var existing = localStorage.getItem(SA.storeKey);
  if (!existing) {
    var ts = (typeof targetStore !== 'undefined' && targetStore) ? targetStore : 'Unknown store';
    localStorage.setItem(SA.storeKey, ts);
  }
})();
  localStorage.setItem(SA.brandKey, 'Rambler Sparkling Water');
  localStorage.setItem(SA.submittedAtKey, String(Date.now()));

  var e = parseInt(localStorage.getItem(SA.earningsKey) || '0', 10);
  localStorage.setItem(SA.earningsKey, String(e + 300)); // +$3
  var j = parseInt(localStorage.getItem(SA.jobsKey) || '0', 10);
  localStorage.setItem(SA.jobsKey, String(j + 1));

  syncClientUI();
  if (typeof scrollToScreen === 'function') scrollToScreen('screen9');
}

// Report builder for Client Snapshot
function buildReportFromState(){
  var brand = localStorage.getItem(SA.brandKey) || '—';
  var store = localStorage.getItem(SA.storeKey) || '—';
  var price = localStorage.getItem(SA.priceKey) || '—';
  var when = localStorage.getItem(SA.submittedAtKey);
  var photo = localStorage.getItem(SA.photoKey);
  var fmt = when ? (new Date(parseInt(when,10))).toLocaleString() : '—';

  var set = function(id,val){ var el=document.getElementById(id); if (el) el.textContent = val; };
  set('report-brand', brand);
  set('report-store', store);
  set('report-price', price ? ('$'+price) : '—');
  set('report-date', fmt);

  var box = document.getElementById('report-photos');
  if (box){ box.innerHTML=''; if (photo){ var img=document.createElement('img'); img.src=photo; img.className='w-full h-24 object-cover rounded'; box.appendChild(img); } }
}

// Photo demo modes
window.autoDemoMode = false;
window.demoIndex = 0;
window.demoPhotos = ['demo_peets_closeup.jpg','demo_peets_aisle.jpg','demo_peets_shelf.jpg'];

function togglePhotoMode(){
  window.autoDemoMode = !window.autoDemoMode;
  var btn = document.getElementById('mode-toggle');
  if (btn) btn.textContent = window.autoDemoMode ? 'Use Upload Mode' : 'Use Auto Demo';
  var up = document.getElementById('upload-block');
  if (up) up.style.display = window.autoDemoMode ? 'none' : 'block';
  if (window.autoDemoMode) loadDemoPhoto(true);
}
function loadDemoPhoto(forceFirst){
  var preview = document.getElementById('photo-preview');
  if (!preview) return;
  preview.innerHTML = '';
  var img = document.createElement('img');
  var idx = forceFirst ? 0 : (window.demoIndex % window.demoPhotos.length);
  img.src = window.demoPhotos[idx];
  img.className = 'max-h-40 object-contain';
  preview.appendChild(img);
}
document.addEventListener('change', function(e){
  if (e.target && e.target.id === 'photo-input' && e.target.files && e.target.files[0]){
    var reader = new FileReader();
    reader.onload = function(ev){
      var preview = document.getElementById('photo-preview');
      if (preview){ preview.innerHTML=''; var img=document.createElement('img'); img.src=ev.target.result; img.className='max-h-40 object-contain'; preview.appendChild(img); localStorage.setItem(SA.photoKey, img.src);
  storePhotoName(img.src);
localStorage.setItem('sa_last_photo_name', getBaseName(img.src)); }
    };
    reader.readAsDataURL(e.target.files[0]);
  }
});
function proceedToAnalysis(){
  var preview = document.getElementById('photo-preview');
  if (window.autoDemoMode && preview && !preview.querySelector('img')) { loadDemoPhoto(true); }
  var img = preview ? preview.querySelector('img') : null;
  if (img) localStorage.setItem(SA.photoKey, img.src);
  storePhotoName(img.src);
localStorage.setItem('sa_last_photo_name', getBaseName(img.src));
  window.demoIndex++;
  if (typeof scrollToScreen === 'function') { scrollToScreen('screen7'); }
}

// Jobs Map toggle
var _liveMap=false;
function toggleMapMode(){
  _liveMap=!_liveMap;
  var s=document.getElementById('map-static');
  var l=document.getElementById('map-live');
  if (s && l){ s.classList.toggle('hidden', _liveMap); l.classList.toggle('hidden', !_liveMap); }
}

document.addEventListener('DOMContentLoaded', initState);
</script>
<script>
(function(){
  if (window.__SA_VISION_PATCH__) return;
  window.__SA_VISION_PATCH__ = true;

  // Helper: get base file name
  function getBaseName(url){ try { return url.split('/').pop().split('?')[0]; } catch(e){ return ''; } }
  window.getBaseName = window.getBaseName || getBaseName;

  // Ensure we can save photo name
  function storePhotoName(src){ try { localStorage.setItem('sa_last_photo_name', getBaseName(src||'')); } catch(e){} }
  window.storePhotoName = window.storePhotoName || storePhotoName;

  // Demo sets
  if (!window.demoSet){ window.demoSet = 'coffee'; }
  function setDemoSet(v){
    window.demoSet = v || 'coffee';
    if (window.demoSet === 'sparkling'){
      window.demoPhotos = ['demo_sparkling_aisle.jpg'];
    } else {
      window.demoPhotos = ['demo_peets_closeup.jpg','demo_peets_aisle.jpg','demo_peets_shelf.jpg'];
    }
  }
  window.setDemoSet = window.setDemoSet || setDemoSet;

  // Vision analysis (demo logic)
  function runVisionAnalysis(){
    var name = localStorage.getItem('sa_last_photo_name') || getBaseName(localStorage.getItem('sa_last_photo')||'');
    var set = window.demoSet || (name.indexOf('sparkling')>=0 ? 'sparkling' : 'coffee');
    var box = document.getElementById('vision-results');
    if (!box) return;
    var html = '';
    if (set === 'sparkling'){
      html += '<div class="mb-2"><b>Detected brands:</b> bubly, Rambler, Topo Chico (approx.)</div>';
      html += '<div class="mb-2"><b>Shelf zones:</b> Top row: Topo Chico • Middle: bubly varieties (multiple colors) • Right column: Rambler varieties</div>';
      html += '<table class="w-full text-xs"><thead><tr><th class="text-left">Brand / Variety</th><th class="text-left">Approx. Facings</th><th class="text-left">Shelf Position</th></tr></thead><tbody>';
      var rows = [
        ['bubly – red', '3–4', 'center-left, rows 3–4'],
        ['bubly – orange', '3–4', 'center rows 3–4'],
        ['bubly – pink', '3–4', 'center rows 3–4'],
        ['bubly – yellow', '2', 'center rows 2–3'],
        ['bubly – green', '2–3', 'center-left rows 2–4'],
        ['bubly – teal/aqua', '3–4', 'center rows 2–5'],
        ['Rambler – Original / Lime / Satsuma / Grapefruit', '7–9 total', 'far-right column, rows 2–5'],
        ['Topo Chico – Lime / Tangerine', '8–10 total', 'top row (row 1)']
      ];
      rows.forEach(function(r){ html += '<tr><td>'+r[0]+'</td><td>'+r[1]+'</td><td>'+r[2]+'</td></tr>'; });
      html += '</tbody></table>';
      html += '<p class="mt-2 text-xs text-gray-600">Note: counts are approximate (±1–2). Pricing OCR not enabled in MVP — use the manual price field.</p>';
    } else {
      html += '<div class="mb-2"><b>Detected brands:</b> Peet\\'s, Tim Hortons, Café Bustelo, Free Rain (approx.)</div>';
      html += '<div class="mb-2">Demo summary for coffee aisle set (placeholder logic).</div>';
    }
    box.innerHTML = html;
    try { localStorage.setItem('sa_last_analysis_html', html); } catch(e){}
  }
  window.runVisionAnalysis = window.runVisionAnalysis || runVisionAnalysis;

  // Inject analysis into report page
  function injectReportAnalysis(){
    try {
      var ana = localStorage.getItem('sa_last_analysis_html');
      var anaBox = document.getElementById('report-analysis');
      if (ana && anaBox) { anaBox.innerHTML = ana; }
    } catch(e){}
  }
  window.injectReportAnalysis = window.injectReportAnalysis || injectReportAnalysis;

  // Patch file upload handler to store photo name (best-effort)
  document.addEventListener('change', function(e){
    if (e.target && e.target.id === 'photo-input' && e.target.files && e.target.files[0]){
      try { storePhotoName(e.target.files[0].name || ''); } catch(_) {}
    }
  });
})();
</script>


<div class="app-container">
  <div id="screen20" class="screen p-6">
    <div class="max-w-2xl mx-auto bg-white rounded-xl shadow p-6">
      <h2 class="text-2xl font-extrabold text-gray-800 mb-4">Create New Job</h2>
      <div class="grid grid-cols-1 gap-4">
        <div>
          <label class="block text-sm font-medium text-gray-700">Product / Brand</label>
          <input id="cj-brand" type="text" class="mt-1 w-full border rounded px-3 py-2" placeholder="e.g., Rambler Sparkling Water">
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700">Store</label>
          <input id="cj-store" list="store-options" type="text" class="mt-1 w-full border rounded px-3 py-2" placeholder="Start typing a store...">
          <datalist id="store-options">
            <option>Whole Foods Market - 10133 Louetta Rd, Houston, TX 77070</option>
            <option>H-E-B - 28520 Tomball Pkwy, Houston, TX 77070</option>
            <option>Sprouts Farmers Market - 22506 Tomball Pkwy, Houston, TX 77375</option>
            <option>Central Market - 3815 Westheimer Rd, Houston, TX 77027</option>
            <option>Whole Foods Market - Kensington High St, London W8 6NA, UK</option>
          </datalist>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700">Job Type</label>
          <div class="mt-1 space-y-2">
            <label class="flex items-center gap-2"><input type="radio" name="cj-type" value="standard" checked> <span>Standard Check — core photos within 48h</span></label>
            <label class="flex items-center gap-2"><input type="radio" name="cj-type" value="launch"> <span>Launch Day Bundle — multiple stores within 24h</span></label>
            <label class="flex items-center gap-2"><input type="radio" name="cj-type" value="rush"> <span>Rush Audit — urgent photos within 6h</span></label>
          </div>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700">Photo Instructions</label>
          <textarea id="cj-notes" rows="4" class="mt-1 w-full border rounded px-3 py-2" placeholder="e.g., Take an up-close photo of the product tag (price + barcode must be readable)."></textarea>
          <p class="text-xs text-gray-500 mt-1">Tip: Keep it short and specific. These appear on the Job Instructions screen.</p>
        </div>
        <div class="flex gap-3 mt-2">
          <button onclick="publishJob()" class="px-4 py-2 bg-[#c62828] text-white rounded-md">Publish Job</button>
          <button onclick="scrollToScreen('screen8')" class="px-4 py-2 border rounded-md">Cancel</button>
        </div>
      </div>
    </div>
  </div>
</div>


<script>
// --- Job pool helpers ---
function getJobsPool(){
  try { return JSON.parse(localStorage.getItem('sa_jobs_pool')||'[]'); } catch(e){ return []; }
}
function setJobsPool(arr){
  try { localStorage.setItem('sa_jobs_pool', JSON.stringify(arr||[])); } catch(e){}
}

// Render dynamic jobs on the worker Dashboard

function renderJobsPool(){
  var list = document.getElementById('jobs-dynamic');
  if (!list) return;
  var jobs = getJobsPool();
  list.innerHTML = '';
  if (!jobs.length){ return; }

  // Group by store
  var groups = {};
  jobs.forEach(function(j){
    var key = j.store || 'Unspecified Store';
    if (!groups[key]) groups[key] = [];
    groups[key].push(j);
  });

  Object.keys(groups).forEach(function(store){
    var header = document.createElement('div');
    header.className = 'bg-gray-200 p-3 rounded-lg text-gray-700 font-medium text-sm';
    header.textContent = store;
    list.appendChild(header);

    groups[store].forEach(function(job){
      var card = document.createElement('div');
      card.className = 'job-box bg-white p-4 rounded-xl shadow-md border cursor-pointer transition hover:shadow-lg';
      card.innerHTML = '<p class="font-bold text-gray-800">'+(job.brand||'New Product')+'</p>'
        + '<p class="text-gray-500 text-sm mt-1">Take and upload 2 photos</p>'
        + '<p class="text-[#f9a825] font-semibold text-sm mt-2">Earn $'+(job.payoutCents/100).toFixed(2)+'</p>';
      card.onclick = function(){
        try {
          localStorage.setItem('sa_current_job_brand', job.brand||'');
          localStorage.setItem('sa_current_job_store', job.store||'');
          localStorage.setItem('sa_current_job_payout', String(job.payoutCents||300));
        } catch(e){}
        if (typeof showLocationModal === 'function'){
          showLocationModal(job.store||'Unknown store', 'screen5');
        } else {
          try { if (window.SA && SA.storeKey) localStorage.setItem(SA.storeKey, job.store||''); } catch(e){}
          scrollToScreen('screen5');
          updateJobDetailsUI();
        }
      };
      list.appendChild(card);
    });
  });
}
 catch(e){}
      if (typeof showLocationModal === 'function'){
        showLocationModal(job.store||'Unknown store', 'screen5');
      } else {
        // Fallback: set store & go to details
        try { if (window.SA && SA.storeKey) localStorage.setItem(SA.storeKey, job.store||''); } catch(e){}
        scrollToScreen('screen5');
        updateJobDetailsUI();
      }
    };
    list.appendChild(card);
  });
}

// Publish job from Create New Job screen
function publishJob(){
  var brand = document.getElementById('cj-brand').value.trim();
  var store = document.getElementById('cj-store').value.trim();
  var notes = document.getElementById('cj-notes').value.trim();
  var type = (document.querySelector('input[name="cj-type"]:checked')||{}).value || 'standard';

  if (!brand || !store){
    alert('Please fill in Product/Brand and Store.');
    return;
  }
  var payout = 300;
  if (type === 'launch') payout = 1200;
  if (type === 'rush') payout = 600;

  var jobs = getJobsPool();
  jobs.push({ id: 'job_'+Date.now(), brand: brand, store: store, notes: notes, type: type, payoutCents: payout });
  setJobsPool(jobs);

  // Prime current job context for convenience
  try {
    localStorage.setItem('sa_current_job_brand', brand);
    localStorage.setItem('sa_current_job_store', store);
    localStorage.setItem('sa_current_job_payout', String(payout));
    localStorage.setItem('sa_current_job_notes', notes);
  } catch(e){}

  // Go to worker dashboard and render
  scrollToScreen('screen4');
  setTimeout(renderJobsPool, 100);
  alert('Job published! It now appears in Jobs Near You.');
}

// Update Job Details UI from localStorage context
function updateJobDetailsUI(){
  var brand = localStorage.getItem('sa_current_job_brand') || '';
  var store = localStorage.getItem('sa_current_job_store') || (window.SA && SA.storeKey ? localStorage.getItem(SA.storeKey) : '') || '';
  var payout = parseInt(localStorage.getItem('sa_current_job_payout')||'0',10);
  var notes = localStorage.getItem('sa_current_job_notes') || '';

  var titleEl = document.getElementById('job-title');
  var storeEl = document.getElementById('job-store');
  var payEl = document.getElementById('job-payout');
  if (titleEl && brand){ titleEl.textContent = brand; }
  if (storeEl && store){ storeEl.textContent = store; }
  if (payEl && payout){ payEl.textContent = '$'+(payout/100).toFixed(2); }

  var box = document.getElementById('job-extra-instructions');
  var txt = document.getElementById('job-extra-instructions-text');
  if (box && txt){
    if (notes){ txt.textContent = notes; box.classList.remove('hidden'); }
    else { box.classList.add('hidden'); }
  }
}

// Hook: when confirming location, update details before navigating
if (typeof confirmLocation === 'function'){
  (function(){
    var old = confirmLocation;
    confirmLocation = function(){
      try {
        if (window.SA && SA.storeKey){
          var ts = (typeof targetStore !== 'undefined' && targetStore) ? targetStore : (localStorage.getItem('sa_current_job_store')||'');
          if (ts){ localStorage.setItem(SA.storeKey, ts); localStorage.setItem('sa_current_job_store', ts); }
        }
      } catch(e){}
      updateJobDetailsUI();
      old();
    }
  })();
}

// On load, render any jobs and sync details if we land on screen5
document.addEventListener('DOMContentLoaded', function(){
  renderJobsPool();
  // If screen5 is visible on load (rare), sync it
  updateJobDetailsUI();
});

// Patch submitJob to save dynamic brand
(function(){
  var _submit = window.submitJob;
  window.submitJob = function(){
    try {
      var b = localStorage.getItem('sa_current_job_brand') || 'Rambler Sparkling Water';
      if (window.SA && SA.brandKey) localStorage.setItem(SA.brandKey, b);
    } catch(e){}
    return _submit ? _submit() : undefined;
  }
})();
</script>


<script>
// === Patch: render jobs grouped by store with same look & feel ===
(function(){
  function getJobsPool(){
    try { return JSON.parse(localStorage.getItem('sa_jobs_pool')||'[]'); } catch(e){ return []; }
  }
  window.renderJobsPool = function(){
    var mount = document.getElementById('jobs-dynamic');
    if (!mount) return;
    var jobs = getJobsPool();
    mount.innerHTML = '';
    if (!jobs.length) return;

    // Group by store
    var groups = {};
    jobs.forEach(function(j){
      var key = j.store || 'Other';
      if (!groups[key]) groups[key] = [];
      groups[key].push(j);
    });

    Object.keys(groups).forEach(function(store){
      var wrap = document.createElement('div');
      wrap.className = 'mt-4';

      // Store header pill (match static style)
      var head = document.createElement('div');
      head.className = 'bg-gray-200 p-3 rounded-lg text-gray-700 font-medium inline-block';
      head.textContent = store;
      wrap.appendChild(head);

      // Jobs under this store
      var list = document.createElement('div');
      list.className = 'mt-2 space-y-3';
      groups[store].forEach(function(job){
        var card = document.createElement('div');
        card.className = 'job-box p-4 rounded-xl shadow-md cursor-pointer transition hover:shadow-lg';
        card.innerHTML = '<p class="font-bold text-gray-800">'+(job.brand||'New Product')+'</p>'
          + '<p class="text-gray-500 text-sm mt-1">Take and upload 2 photos</p>'
          + '<p class="text-[#f9a825] font-semibold text-sm mt-2">Earn $'+((job.payoutCents||300)/100).toFixed(2)+'</p>';
        card.onclick = function(){
          try {
            localStorage.setItem('sa_current_job_brand', job.brand||'');
            localStorage.setItem('sa_current_job_store', job.store||'');
            localStorage.setItem('sa_current_job_payout', String(job.payoutCents||300));
            localStorage.setItem('sa_current_job_notes', job.notes||'');
          } catch(e){}
          if (typeof showLocationModal === 'function'){
            showLocationModal(job.store||'Unknown store', 'screen5');
          } else {
            if (window.SA && SA.storeKey) localStorage.setItem(SA.storeKey, job.store||'');
            scrollToScreen('screen5'); 
            if (typeof updateJobDetailsUI === 'function') updateJobDetailsUI();
          }
        };
        list.appendChild(card);
      });
      wrap.appendChild(list);
      mount.appendChild(wrap);
    });
  };

  // Initial render on load (in case jobs already exist)
  document.addEventListener('DOMContentLoaded', function(){ 
    try { renderJobsPool(); } catch(e){} 
  });
})();
</script>
<script>
  function openAdminDashboard() {
    // Find the first ".screen" whose text includes "Administrator Dashboard"
    var adminEl = Array.from(document.querySelectorAll('.screen[id^="screen"]'))
      .find(el => /Administrator Dashboard/i.test(el.textContent || ''));
    if (!adminEl) { alert('Admin Dashboard screen not found'); return; }

    if (typeof scrollToScreen === 'function') {
      scrollToScreen(adminEl.id);
    } else {
      adminEl.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }
  }
</script>
        
</body>
</html>
